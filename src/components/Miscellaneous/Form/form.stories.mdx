import { Meta, Canvas, Story } from '@storybook/addon-docs/blocks';
import PbForm from './Form.vue';

<Meta
  title="Components/Miscellaneous/PbForm"
  component={PbForm}
  argTypes={{
    formResponse: {
      type: 'object',
      defaultValue: {
        file: {
          url: "https://i.stack.imgur.com/A9Ped.png",
          fileDetails: {
            type: "image"
          }
        },
      },
    },
    onlyShow: {
      type: 'boolean',
      defaultValue: false,
    },
    entitySchema: {
      type: 'object',
      defaultValue: {
        html: {
          type: 'html',
          label: 'Exemplo de um campo html',
          tip: 'Ainda não implementamos o componente certo',
          dynamic: true,
          placeholder: 'digite um html aqui!'
        },
        string: {
          type: 'string',
          label: 'Campo normal de string',
          required: true,
          position: 1,
          defaultValue: 'Uhulll!',
        },
        number: {
          type: 'number',
          label: 'Exemple field number',
          position: 3,
        },
        boolean: {
          type: 'boolean',
          label: 'Este form esta top???',
          required: true,
          position: 77,
          tip: 'Só vale dizer que sim',
          defaultValue: true,
        },
        text: {
          type: 'text',
          label: 'Texte aria kk .',
          required: false,
          position: 7,
          tip: 'Tip of text field',
          dynamic: false,
          columnVisible: true,
          occult: false,
          defaultValue: '',
        },
        file: {
          type: 'file',
          label: 'Precisa passar a funcao upload',
          filterFileTypes: ['.txt', '.pdf', 'se não passar o array ele não filtra os tipos de arquivo'],
        },
        datetime: {
          type: 'datetime',
          label: 'Exemple field datetime',
          required: false,
          position: 9,
          tip: 'Tip of datetime field',
          dynamic: false,
          columnVisible: true,
          occult: false,
          defaultValue: 0,
          onlyDate: false,
        },
        object: {
          type: 'object',
          label: 'Exemple field object',
          required: false,
          position: 3,
          tip: 'Tip of object field',
          dynamic: false,
          columnVisible: true,
          occult: false,
          defaultValue: {},
          contentObject: {
            'exemple-object': {
              type: 'boolean',
              label: 'Exemple field text -object',
            },
            'file': {
              type: 'file',
              label: 'Exemple field file -object',
            },
          },
        },
        array: {
          type: 'array',
          label: 'Exemple field array',
          required: false,
          position: 999,
          tip: 'Tip of array field',
          dynamic: false,
          columnVisible: true,
          occult: false,
          defaultValue: [],
          contentArray: {
            "type": "string",
            "label": "Exemple field array string",
          },
        },
        select: {
          type: 'select',
          label: 'Exemple field select',
          required: false,
          position: 1,
          tip: 'Tip of select field',
          dynamic: false,
          columnVisible: true,
          occult: false,
          defaultValue: null,
          enabledValue: ['true', 'false', 'undefined'],
          labelValue: ['Verdadeiro', 'Falso', 'Nulo'],
        },
        'object-keys': {
          type: 'object-keys',
          label: 'Exemple field object-keys',
          required: false,
          position: 1,
          tip: 'Tip of object-keys field',
          dynamic: false,
          columnVisible: true,
          occult: false,
          defaultValue: {},
          keyType: 'text',
          keyLabel: 'object-key',
          contentObject: {
            type: 'number',
            label: 'Exemple field text -object',
          },
        },
        'custom-field': {
          type: 'custom-field',
          slotName: 'custom-field',
        }
      }
    },
  }}
/>

export const Template = (args, { argTypes }) => ({
  props: Object.keys(argTypes),
  components: { PbForm },
  template: `
    <section style="background-color: white; padding: 35px;">
      <PbForm
        :only-show="onlyShow"
        :entity-schema="entitySchema"
        v-model="formResponse"
      />
      From Response: {{formResponse}}
    </section>
  `
});

# **PbForm**
### The `PbForm` component can be used to create a full form.

### Purpose and Use case
Create a screen to solicite a entity data.

### Entity Schema

`{myValueField: settingsField}`
##### Possibilities of settingsField

- label: Name showed to user
- required: If field needs solicitation data
- position: Position of field in form
- tip: Tip to hint field
- dynamic: If field was be only showed, without edition
- columnVisible: If field was be show in dataTable
- occult: If field do not showed to user
- defaultValue: Default value to load field
- validator: Function to valid prop
- placeholder: To show in input
- type: Type of field

Possibilities of types

- html: html field
- string: text field
- number: number field
- boolean: switch
- - hasThreeState: if enable undefined or null value
- text: text area
- file: upload field
- - filterFileTypes: array of types file to accept
- datetime: date piker
- - onlyDate: if has only date in piker
- object: object field
- - contentObject: the settings of object content
- array: array field
- - contentArray: the settings of array content
- select: options field
- - enabledValue": values to select
- - labelValue": values of user see
- object-keys: object field with dynamic keys
- - keyType: string | number
- - keyLabel: label to show
- - contentObject: the settings of object content
- custom-field: slot field
- - slotName: name of slot to be used

Full Possibilities
```json
{
  "html": {
    "type": "html",
    "label": "Exemple field html",
    "required": false,
    "position": 1,
    "tip": "Tip of html field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": ""
  },
  "string": {
    "type": "string",
    "label": "Exemple field string",
    "required": false,
    "position": 2,
    "tip": "Tip of string field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": ""
  },
  "number": {
    "type": "number",
    "label": "Exemple field number",
    "required": false,
    "position": 3,
    "tip": "Tip of number field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": 0
  },
  "boolean": {
    "type": "boolean",
    "label": "Exemple field boolean",
    "required": false,
    "position": 0,
    "tip": "Tip of boolean field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": null,
    "hasThreeState": true
  },
  "text": {
    "type": "text",
    "label": "Exemple field text",
    "required": false,
    "position": 1,
    "tip": "Tip of text field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": ""
  },
  "file": {
    "type": "file",
    "label": "Exemple field file",
    "required": false,
    "position": 1,
    "tip": "Tip of file field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": {},
    "filterFileTypes": [
      "txt",
      "pdf",
      "se não passar o array ele não filtra os tipos de arquivo"
    ]
  },
  "datetime": {
    "type": "datetime",
    "label": "Exemple field datetime",
    "required": false,
    "position": 1,
    "tip": "Tip of datetime field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": 0,
    "onlyDate": false
  },
  "object": {
    "type": "object",
    "label": "Exemple field object",
    "required": false,
    "position": 1,
    "tip": "Tip of object field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": {},
    "contentObject": {
      "exemple-object": {
        "type": "text",
        "label": "Exemple field text -object"
      }
    }
  },
  "array": {
    "type": "array",
    "label": "Exemple field array",
    "required": false,
    "position": 1,
    "tip": "Tip of array field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": [],
    "contentArray": {
      "type": "text",
      "label": "Exemple field text -array"
    }
  },
  "select": {
    "type": "select",
    "label": "Exemple field select",
    "required": false,
    "position": 1,
    "tip": "Tip of select field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": null,
    "enabledValue": ["true", "false", "undefined"],
    "labelValue": ["Verdadeiro", "Falso", "Nulo"]
  },
  "object-keys": {
    "type": "object-keys",
    "label": "Exemple field object-keys",
    "required": false,
    "position": 1,
    "tip": "Tip of object-keys field",
    "dynamic": false,
    "columnVisible": true,
    "occult": false,
    "defaultValue": {},
    "keyType": "text",
    "keyLabel": "object-key",
    "contentObject": {
      "type": "text",
      "label": "Exemple field text -object"
    }
  },
  "custom-field": {
    "type": "custom-field",
    "slotName": "custom-field"
  }
}
```

## Examples

### Default

<Canvas>
  <Story name="Default">
    {Template.bind({})}
  </Story>
</Canvas>

### Only Show

<Canvas>
  <Story name="Only show form"
    args={{
      onlyShow: true
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

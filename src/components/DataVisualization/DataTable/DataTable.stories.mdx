import { Meta, Story, Canvas } from '@storybook/addon-docs/blocks';
import PbDataTable from './DataTable.vue';
import PbButton from '../../Buttons/Button/Button.vue';

<Meta
  title="Components/Data Visualization/PbDataTable"
  component={PbDataTable}
  argTypes={{
       title: {
        control: {
          type: 'text',
        },
        defaultValue: 'Documento nova loja',
      },
       emptyText: {
        control: {
          type: 'text',
        },
        defaultValue: 'Sem registros.',
      },
      hiddenHeader: {
        control: {
          type: 'boolean',
        },
        defaultValue: false
      },
      showSortIcon: {
        control: {
          type: 'boolean',
        },
        defaultValue: true
      },
      showCreateButton: {
        control: {
          type: 'boolean',
        },
        defaultValue: true
      },
      entities: {
        control: {
          type: 'array',
        },
        defaultValue: [
          { appId: 'Fricassê', jsonData: { nome: '4 pessoas', country: 'França', address: { street: 'Frango',number: 'R$ 68,00' } } },
          { appId: 'Strogonoff', jsonData: { nome: '4 pesosas', country: 'Russia', address: { street: 'Creme de leite',number: 'R$ 38,00' }} },
          { appId: 'Banoffee', jsonData: { nome: '6 pessoas', country: 'Reino Unido', address: { street: 'Banana', number: 'R$ 50,00'} } },
          { appId: 'Torta alemã', jsonData: { nome: '6 pessoas', country: 'Alemanhã', address: { street: 'Bolacha', number: 'R$ 60,00' } } },
        ],
      },
      entitySchema: {
        control: {
          type: 'object',
        },
        defaultValue: {
          appId: {
            type: 'string',
            label: 'Pratos',
            columnVisible: true
          },
          jsonData: {
            type: 'object',
            label: 'Dados',
            columnVisible: true,
            contentObject: {
              address: {
                type:'object',
                columnVisible: true,
                label: 'Endereço',
                contentObject:{
                  number: {
                    type: 'number',
                    columnVisible: true,
                    label: 'Valor',
                  },
                  street: {
                    type: 'string',
                    label: 'Ingrediente  Chave',
                  }
                }
              },
              nome: {
                type: 'string',
                label: 'Serve',
                columnVisible: true,
              },
              country: {
                type: 'string',
                label: 'Pais',
              },
            },
          },
        },
      },
  }}
/>

export const Template = (args, { argTypes }) => ({
  props: Object.keys(argTypes),
  components: { PbDataTable, PbButton },
  template: `
    <div style="background-color: white; padding: 30px;">
      <PbDataTable
        :title="title"
        :entities="entities"
        :entitySchema="entitySchema"
        :settings="{showSortIcon, hiddenHeader, emptyText, showCreateButton}"
        @delete-entity="index => entities.splice(index, 1)"
        @update-entity="(index, entity) => entities.splice(index, 1, entity)"
        @create-entity="entity => entities.push(entity)"
      >
      </PbDataTable>
    </div>
  `,
});

# **PbDataTable**
### The `PbDataTable` it's a pivot table.

### Purpose and Use Case

A `PbDataTable` is used to make a list of contents in a pivot table.

## Examples

### Default

<Canvas>
  <Story name="Default">
    {Template.bind({})}
  </Story>
</Canvas>
